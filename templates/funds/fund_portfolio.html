{% extends 'base.html' %}
{% load humanize %}

{% block title %}{{ fund.name }} - Portfolio{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-8">
    <div>
        <nav class="flex text-sm text-slate-500 mb-1">
            <a href="{% url 'funds:portal-funds' %}" class="hover:text-indigo-600 transition-colors">Funds</a>
            <span class="mx-2">/</span>
            <a href="{% url 'funds:fund_detail' fund.pk %}" class="hover:text-indigo-600 transition-colors">{{ fund.name }}</a>
            <span class="mx-2">/</span>
            <span class="text-slate-800 font-medium">Portfolio Holdings</span>
        </nav>
        <h1 class="text-2xl font-bold text-slate-900">Investment Portfolio</h1>
    </div>
    <div class="flex gap-3">
        <a href="{% url 'transactions:add_purchase' fund.pk %}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-xl font-medium text-sm flex items-center gap-2 shadow-lg shadow-indigo-200 transition-all">
            <i data-lucide="plus-circle" class="w-4 h-4"></i> New Investment
        </a>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-slate-900 text-white p-6 rounded-2xl shadow-lg">
        <p class="text-slate-400 text-xs font-bold uppercase tracking-wider">Total Invested Cost</p>
        <h3 class="text-2xl font-bold mt-1">{{ fund.currency.symbol }} 45.2 Cr</h3>
        <p class="text-[10px] text-slate-400 mt-2">Across 8 Companies</p>
    </div>
    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
        <p class="text-slate-500 text-xs font-bold uppercase tracking-wider">Current Fair Value</p>
        <h3 class="text-2xl font-bold text-slate-900 mt-1">{{ fund.currency.symbol }} 58.9 Cr</h3>
        <p class="text-xs text-emerald-600 font-semibold mt-2 flex items-center gap-1">
            <i data-lucide="trending-up" class="w-3 h-3"></i> +30.3% Unrealized Gain
        </p>
    </div>
    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
        <p class="text-slate-500 text-xs font-bold uppercase tracking-wider">Realized Exits</p>
        <h3 class="text-2xl font-bold text-slate-900 mt-1">{{ fund.currency.symbol }} 12.5 Cr</h3>
        <p class="text-[10px] text-slate-400 mt-2">From 2 Full Exits</p>
    </div>
    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
        <p class="text-slate-500 text-xs font-bold uppercase tracking-wider">TVPI (MoC)</p>
        <h3 class="text-2xl font-bold text-indigo-600 mt-1">1.58x</h3>
        <p class="text-[10px] text-slate-400 mt-2">Total Value to Paid-In</p>
    </div>
</div>

<div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
    <div class="p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
        <h3 class="font-bold text-slate-800">Active Holdings</h3>
        
        <div class="flex bg-slate-200 rounded-lg p-1">
            <button class="px-3 py-1 rounded-md bg-white text-slate-800 text-xs font-semibold shadow-sm">Table</button>
            <button class="px-3 py-1 rounded-md text-slate-500 hover:text-slate-700 text-xs font-medium">Charts</button>
        </div>
    </div>
    
    <table class="w-full text-left border-collapse">
        <thead class="bg-slate-50 border-b border-slate-200">
            <tr>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider">Company / Sector</th>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right">Inv. Date</th>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right">Cost Basis</th>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right">Fair Value</th>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right">MoC</th>
                <th class="px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-center">Action</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
            <tr class="group hover:bg-slate-50 transition-colors">
                <td class="px-6 py-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-sm">
                            ZL
                        </div>
                        <div>
                            <span class="block font-semibold text-slate-900">Zeta Logistics Ltd</span>
                            <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-slate-100 text-slate-600 border border-slate-200 mt-1">
                                Logistics
                            </span>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 text-right text-sm text-slate-600 font-mono">Dec 12, 2023</td>
                <td class="px-6 py-4 text-right">
                    <div class="text-sm font-medium text-slate-900">{{ fund.currency.symbol }} 5,00,00,000</div>
                    <div class="text-[10px] text-slate-400">@ ₹100/share</div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="text-sm font-bold text-emerald-700">{{ fund.currency.symbol }} 6,25,00,000</div>
                    <div class="text-[10px] text-emerald-600">▲ 25%</div>
                </td>
                <td class="px-6 py-4 text-right">
                    <span class="px-2 py-1 rounded-md bg-emerald-50 text-emerald-700 text-xs font-bold border border-emerald-100">1.25x</span>
                </td>
                <td class="px-6 py-4 text-center">
                    <div class="opacity-0 group-hover:opacity-100 transition-opacity flex justify-center gap-2">
                        <a href="#" class="p-1.5 hover:bg-white rounded border border-transparent hover:border-slate-200 text-slate-400 hover:text-indigo-600" title="Add Follow-on">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                        </a>
                        <a href="{% url 'transactions:add_redemption' fund.pk %}" class="p-1.5 hover:bg-white rounded border border-transparent hover:border-slate-200 text-slate-400 hover:text-amber-600" title="Exit/Redeem">
                            <i data-lucide="log-out" class="w-4 h-4"></i>
                        </a>
                    </div>
                </td>
            </tr>

            <tr class="group hover:bg-slate-50 transition-colors">
                <td class="px-6 py-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-500 font-bold text-sm">
                            NT
                        </div>
                        <div>
                            <span class="block font-semibold text-slate-900">NanoTech Solutions</span>
                            <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-slate-100 text-slate-600 border border-slate-200 mt-1">
                                DeepTech
                            </span>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 text-right text-sm text-slate-600 font-mono">Jan 10, 2024</td>
                <td class="px-6 py-4 text-right">
                    <div class="text-sm font-medium text-slate-900">{{ fund.currency.symbol }} 2,00,00,000</div>
                    <div class="text-[10px] text-slate-400">@ ₹500/share</div>
                </td>
                <td class="px-6 py-4 text-right">
                    <div class="text-sm font-bold text-amber-700">{{ fund.currency.symbol }} 1,80,00,000</div>
                    <div class="text-[10px] text-amber-600">▼ 10%</div>
                </td>
                <td class="px-6 py-4 text-right">
                    <span class="px-2 py-1 rounded-md bg-amber-50 text-amber-700 text-xs font-bold border border-amber-100">0.90x</span>
                </td>
                <td class="px-6 py-4 text-center">
                    <div class="opacity-0 group-hover:opacity-100 transition-opacity flex justify-center gap-2">
                        <a href="#" class="p-1.5 hover:bg-white rounded border border-transparent hover:border-slate-200 text-slate-400 hover:text-indigo-600">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                        </a>
                        <a href="#" class="p-1.5 hover:bg-white rounded border border-transparent hover:border-slate-200 text-slate-400 hover:text-amber-600">
                            <i data-lucide="log-out" class="w-4 h-4"></i>
                        </a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% endblock %}