{% extends 'base.html' %}
{% block title %}Post Corporate Action - {{ company.name }}{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
    <div class="mb-8">
        <a href="{% url 'investee_companies:portal-detail' company.pk %}" class="text-sm font-bold text-secondary hover:text-primary transition">
            <i class="bi bi-arrow-left mr-2"></i> Back to Dashboard
        </a>
        <h1 class="text-3xl font-bold text-dark mt-4">Post Corporate Action</h1>
    </div>

    <div class="bg-white rounded-3xl shadow-sm border border-slate-100 p-8">
        <div class="bg-amber-50 border border-amber-100 p-4 rounded-2xl mb-8 flex gap-3">
            <i class="bi bi-info-circle-fill text-amber-500"></i>
            <p class="text-[10px] text-amber-800 font-bold uppercase leading-relaxed">
                Note: This will not change your historical purchase records. It will post an adjustment to the current holding balance and instrument definitions on the effective date.
            </p>
        </div>

        <form method="POST" class="space-y-6">
            {% csrf_token %}
            <div>
                <label class="block text-[10px] font-black text-secondary uppercase tracking-widest mb-2">Instrument Class</label>
                <select name="target_class" class="w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl focus:ring-2 focus:ring-primary/20 outline-none text-sm font-bold">
                    {% for sc in share_classes %}
                    <option value="{{ sc.id }}">{{ sc.class_name }} ({{ sc.get_share_type_display }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] font-black text-secondary uppercase tracking-widest mb-2">Action Type</label>
                    <select name="action_type" class="w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl outline-none text-sm font-bold">
                        <option value="BONUS">Bonus Issue</option>
                        <option value="SPLIT">Stock Split</option>
                    </select>
                </div>
                <div>
                    <label class="block text-[10px] font-black text-secondary uppercase tracking-widest mb-2">Effective Date</label>
                    <input type="date" name="action_date" required class="w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold">
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-[10px] font-black text-secondary uppercase tracking-widest mb-2">Ratio (From)</label>
                    <input type="number" name="ratio_from" value="1" class="w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold">
                </div>
                <div>
                    <label class="block text-[10px] font-black text-secondary uppercase tracking-widest mb-2">Ratio (To)</label>
                    <input type="number" name="ratio_to" value="1" class="w-full px-4 py-3 bg-slate-50 border border-slate-100 rounded-xl text-sm font-bold">
                </div>
            </div>

            <button type="submit" class="w-full py-4 bg-dark text-white rounded-2xl font-bold shadow-xl shadow-slate-200 hover:bg-black transition">
                Execute Adjustment
            </button>
        </form>
    </div>
</div>
{% endblock %}